(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+QeJ":function(t,i,e){"use strict";e.r(i);var a=e("3Dbt"),n=(e("p1OT"),e("gJae"),e("lT11"));"function"==typeof Symbol&&Symbol.iterator;var s=e("YNTy"),o={components:{wxHeader:a.a,quillEditor:n.quillEditor},mounted:function(){var t=this;wx.miniProgram.getEnv(function(t){});var i=function(){for(var t={},i=location.search.substring(1).split("&"),e=0;e<i.length;e++){var a=i[e].indexOf("=");if(-1!=a){var n=i[e].substring(0,a),s=i[e].substring(a+1);s=decodeURIComponent(s),t[n]=s}}return t}();this.article_id=i.article_id,this.Authorization=i.Authorization,Object(s.d)({article_id:this.article_id,Authorization:i.Authorization}).then(function(i){t.article_images=i.data.images,t.content=i.data.content})},data:function(){return{article_id:"",Authorization:"",article_images:[],imagesVisible:!1,editorOption:{debug:!1,placeholder:"开始分享吧",readOnly:!0,theme:"snow",modules:{toolbar:{container:"#toolbar",handlers:{image:this.imageUpload}}}},content:"",rich_content:[],dialogVisible:!0}},computed:{editor:function(){var t=this.$refs.myQuillEditor.quill;return t}},methods:{wxConfig:function(t){wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["chooseImage"]})},onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorReady:function(t){},imageUpload:function(t){},videoUpload:function(t){},UploadHandler:function(){var t=this;this.$confirm("确定提交?","提示",{customClass:"wx",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=t.editor.getText(0,160);Object(s.a)({article_id:t.article_id,article_content:t.content,pre_content:i,Authorization:t.Authorization}).then(function(i){i.success?(wx.miniProgram.postMessage({data:{article_id:i.data.article_id}}),wx.miniProgram.navigateBack()):t.$message.error(i.message)})}).catch(function(){})},imgSelect:function(t){var i=this.editor.getLength();this.editor.insertEmbed(i,"image",t.imageURL),this.editor.insertText(i+1," "),this.imagesVisible=!1},videoSelect:function(t){}}},l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"article"},[e("wx-header",{attrs:{fixed:"",title:"文章正文"}}),t._v(" "),e("quill-editor",{ref:"myQuillEditor",staticClass:"article_editor",attrs:{options:t.editorOption},on:{blur:function(i){t.onEditorBlur(i)},focus:function(i){t.onEditorFocus(i)},ready:function(i){t.onEditorReady(i)}},model:{value:t.content,callback:function(i){t.content=i},expression:"content"}},[e("div",{attrs:{slot:"toolbar",id:"toolbar"},slot:"toolbar"},[e("button",{staticClass:"ql ql-bold"},[t._v("Bold")]),t._v(" "),e("button",{staticClass:"ql ql-italic"},[t._v("Italic")]),t._v(" "),e("button",{staticClass:"ql ql-list",attrs:{value:"ordered"}}),t._v(" "),e("button",{staticClass:"ql ql-list",attrs:{value:"bullet"}}),t._v(" "),e("button",{staticClass:"ql ql-script",attrs:{value:"sub"}}),t._v(" "),e("button",{staticClass:"ql ql-script",attrs:{value:"super"}}),t._v(" "),e("button",{staticClass:"ql ql-indent",attrs:{value:"-1"}}),t._v(" "),e("button",{staticClass:"ql ql-indent",attrs:{value:"+1"}}),t._v(" "),e("button",{staticClass:"ql ql-image",on:{click:function(i){t.imagesVisible=!0}}}),t._v(" "),e("el-button",{attrs:{type:"text"},on:{click:t.UploadHandler}},[t._v("完成")])],1)]),t._v(" "),e("el-dialog",{staticClass:"article_assets",attrs:{title:"图片选择(点击选择)",visible:t.imagesVisible},on:{"update:visible":function(i){t.imagesVisible=i}}},[t.article_images.length?e("ul",{staticClass:"article_assets_list"},[e("el-row",{staticClass:"row-bg",attrs:{gutter:18}},t._l(t.article_images,function(i,a){return e("el-col",{key:a,attrs:{span:8}},[e("div",{staticClass:"article_assets_item",on:{click:function(e){t.imgSelect(i)}}},[e("img",{attrs:{src:i.imageURL,alt:""}})])])}))],1):e("h3",[t._v("没有提交图片素材")])])],1)};l._withStripped=!0;var r=e("JFUb"),c=!1;var u=function(t){c||e("x51t")},d=Object(r.a)(o,l,[],!1,u,null,null);d.options.__file="app\\web\\views\\article\\index.vue";i.default=d.exports},"3Dbt":function(t,i,e){"use strict";var a={name:"mt-header",props:{fixed:Boolean,title:String}},n=function(){var t=this.$createElement,i=this._self._c||t;return i("header",{staticClass:"c-header",class:{"is-fixed":this.fixed}},[i("div",{staticClass:"c-header-button is-left"}),this._v(" "),i("h1",{staticClass:"c-header-title",domProps:{textContent:this._s(this.title)}}),this._v(" "),i("div",{staticClass:"c-header-button is-right"})])};n._withStripped=!0;var s=e("JFUb"),o=!1;var l=function(t){o||e("CB/o")},r=Object(s.a)(a,n,[],!1,l,null,null);r.options.__file="app\\web\\components\\wxHeader\\index.vue";i.a=r.exports},"CB/o":function(t,i){},x51t:function(t,i){}}]);